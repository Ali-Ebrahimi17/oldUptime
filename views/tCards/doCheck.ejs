<% layout('layouts/boilerplateTCard')%>

<div class="main-tCard-container">
	<h2 class="main-title"><%= division.toUpperCase() %> CRITICAL CHECKS</h2>
	<div class="row" style="width: 100%; margin-top: -30px">
		<div id="reallocation-container">
			<div class="modal-form">
				<div class="modal-content" style="border-radius: 0">
					<div style="background-color: rgb(252, 176, 38); height: 50px">
						<button style="color: black; margin: 5px" class="close" aria-label="Close"></button>
						<h4 style="text-align: center; margin: 8px"><%= tCard.name.toUpperCase() %></h4>
					</div>
					<div class="modal-body">
						<form action="/tCard/<%= tCard._id %>/check" method="POST" onsubmit="myButton.disabled = true; return true;">
							<fieldset>
								<div class="form-group">
									<label for="exampleTextarea">Pass Requirements</label>
									<textarea class="form-control" id="reasonTextarea" rows="10" style="resize: none" disabled><%= tCard.description %></textarea>
								</div>
								<% if (tCard.type === 'Value') { %> <% if (tCard.manual === 'Yes') { %>
								<div class="row">
									<div class="col">
										<label for="name">Value</label>
										<input class="form-control" type="number" step="0.1" name="check[value]" required />
									</div>
									<div class="col">
										<label for="name">Target Value</label>
										<input class="form-control" type="number" step="0.1" name="check[target]" required />
									</div>
									<% if (tCard.area !== 'quality') { %>
									<div class="col">
										<label for="exampleSelect1">Check Completed By</label>
										<select style="margin-bottom: 15px" class="form-control" name="check[checkedBy]" id="completedBy" required>
											<option hidden></option>
											<% names.forEach(name => { %>
											<option label="<%= name.name %>" value="<%= name.name %>"><% }) %></option>
										</select>
									</div>
									<% } %>
								</div>
								<div class="row">
									<div class="col">
										<label for="exampleTextarea">Comments</label>
										<textarea
											class="form-control"
											name="check[comments]"
											id="reasonTextarea"
											rows="3"
											style="resize: none; margin-bottom: 15px"
											required
										></textarea>
									</div>
								</div>

								<% } else { %>
								<div class="row">
									<div class="col">
										<label for="name">Value</label>
										<input class="form-control" type="number" step="0.1" name="check[value]" required />
									</div>
									<% if (tCard.area !== 'quality') { %>
									<div class="col">
										<label for="exampleSelect1">Check Completed By</label>
										<select style="margin-bottom: 15px" class="form-control" name="check[checkedBy]" id="completedBy" required>
											<option hidden></option>
											<% names.forEach(name => { %>
											<option label="<%= name.name %>" value="<%= name.name %>"><% }) %></option>
										</select>
									</div>
									<% } %>
								</div>
								<div class="row">
									<div class="col">
										<label for="exampleTextarea">Comments</label>
										<textarea
											class="form-control"
											name="check[comments]"
											id="reasonTextarea"
											rows="3"
											style="resize: none; margin-bottom: 15px"
										></textarea>
									</div>
								</div>

								<% } %> <% } %> <% if (tCard.type === 'OK/Not OK') { %>
								<div class="row">
									<div class="col">
										<label for="exampleSelect1">OK/Not OK</label>
										<select style="margin-bottom: 15px" class="form-control" name="check[agreed]" id="completedBy" required>
											<option hidden></option>
											<option>OK</option>
											<option>Not OK</option>
										</select>
									</div>
									<% if (tCard.area !== 'quality') { %>
									<div class="col">
										<label for="exampleSelect1">Check Completed By</label>
										<select style="margin-bottom: 15px" class="form-control" name="check[checkedBy]" id="completedBy" required>
											<option hidden></option>
											<% names.forEach(name => { %>
											<option label="<%= name.name %>" value="<%= name.name %>"><% }) %></option>
										</select>
									</div>
									<% } %>
								</div>
								<div class="row">
									<div class="col">
										<label for="exampleTextarea">Comments</label>
										<textarea
											class="form-control"
											name="check[comments]"
											id="reasonTextarea"
											rows="3"
											style="resize: none; margin-bottom: 15px"
										></textarea>
									</div>
								</div>
								<% } %> <% if (tCard.type === 'On Plan/Off Plan') { %>
								<div class="row">
									<div class="col">
										<label for="exampleSelect1">On Plan/Off Plan</label>
										<select style="margin-bottom: 15px" class="form-control" name="check[agreed]" id="completedBy" required>
											<option hidden></option>
											<option>On Plan</option>
											<option>Off Plan</option>
										</select>
									</div>
									<% if (tCard.area !== 'quality') { %>
									<div class="col">
										<label for="exampleSelect1">Check Completed By</label>
										<select style="margin-bottom: 15px" class="form-control" name="check[checkedBy]" id="completedBy" required>
											<option hidden></option>
											<% names.forEach(name => { %>
											<option label="<%= name.name %>" value="<%= name.name %>"><% }) %></option>
										</select>
									</div>
									<% } %>
								</div>
								<div class="row">
									<div class="col">
										<label for="exampleTextarea">Comments</label>
										<textarea
											class="form-control"
											name="check[comments]"
											id="reasonTextarea"
											rows="3"
											style="resize: none; margin-bottom: 15px"
										></textarea>
									</div>
								</div>
								<% } %> <% if (tCard.type === 'Yes/No') { %>
								<div class="row">
									<div class="col">
										<label for="exampleSelect1">Yes/No</label>
										<select style="margin-bottom: 15px" class="form-control" name="check[agreed]" id="completedBy" required>
											<option hidden></option>
											<option>Yes</option>
											<option>No</option>
										</select>
									</div>
									<% if (tCard.area !== 'quality') { %>
									<div class="col">
										<label for="exampleSelect1">Check Completed By</label>
										<select style="margin-bottom: 15px" class="form-control" name="check[checkedBy]" id="completedBy" required>
											<option hidden></option>
											<% names.forEach(name => { %>
											<option label="<%= name.name %>" value="<%= name.name %>"><% }) %></option>
										</select>
									</div>
									<% } %>
								</div>
								<div class="row">
									<div class="col">
										<label for="exampleTextarea">Comments</label>
										<textarea
											class="form-control"
											name="check[comments]"
											id="reasonTextarea"
											rows="3"
											style="resize: none; margin-bottom: 15px"
										></textarea>
									</div>
								</div>

								<% } %> <% if ((tCard.name === 'Gloss Level - Black' )|| (tCard.area === 'quality' && currentUser && currentUser.isTCardAdmin )) { %>
								<a type="button" class="btn btn-primary" href="/tCard/<%= tCard._id %>/check/bypass">Check Not Required Today</a>
								<% } %>
								<a
									class="btn btn-danger float-right"
									style="margin-left: 8px"
									href="/tCard/show/<%= tCard.division %>/<%= tCard.area %>/<%= tCard.location %>/<%= tCard.shiftP %>"
									>Cancel</a
								>
								<button type="submit" name="myButton" class="btn btn-success float-right" style="margin-left: 8px">Submit</button>
							</fieldset>
						</form>
					</div>
					<div style="background-color: rgb(252, 176, 38); display: flex; align-items: center; height: 50px; display: flex">
						<img style="margin: 5px" height="24px" src="/7z/content/images/jcb-logo.png" /> <img height="24px" src="/7z/content/images/df.png" />
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
